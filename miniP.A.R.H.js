javascript:(()=>{let e=Date.now(),t=!0,n=new Map,r=0,i=[];function o(e){return e.id||(e.id=`link-${r++}`),e.id}let l=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;n.has(t)||(o(t),n.set(t,{time:0,timer:null}));let r=n.get(t);e.isIntersecting?r.timer=setInterval(()=>{r.time+=.5},500):(clearInterval(r.timer),r.timer=null)})},{threshold:.5});if(document.querySelectorAll("p").forEach(e=>l.observe(e)),!document.querySelector(%27link[href*="fonts.googleapis.com/css2?family=Jomhuria"]%27)){let a=document.createElement("link");a.href="https://fonts.googleapis.com/css2?family=Jomhuria&display=swap",a.rel="stylesheet",document.head.appendChild(a)}function s(e){navigator.clipboard.writeText(e).then(()=>{alert("Text copied to clipboard!");let e=document.createElement("a");e.href="https://gemini.google.com/app?hl=en",e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)}).catch(e=>{alert("Failed to copy text: ",e)})}function d(e,t){let n=document.createElement("div");n.style.position="fixed",n.style.top="20px",n.style.right="20px",n.style.maxWidth="350px",n.style.maxHeight="400px",n.style.overflowY="auto",n.style.background="#fae3c6",n.style.border="2px solid #333",n.style.borderRadius="12px",n.style.padding="12px",n.style.fontSize="30px",n.style.lineHeight="1.3",n.style.zIndex="999",n.style.fontFamily="'Jomhuria', sans-serif",n.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.2)",n.innerHTML=%60<strong>ðŸ•’ Total Time:</strong> ${e}s<br>    <strong>ðŸ“– Read Paragraphs:</strong><ul style="padding-left: 1em;"></ul>    <button id="closePARH" style="margin-top: 10px; background-color: #ffaaa5;     border: none; border-radius: 8px;font-family: 'Jomhuria', sans-serif; font-size: 20px; padding: 3px 6px;      cursor: pointer;">Close</button><button id="openGemini" style="margin-top: 10px; background-color: #9df9ef; border: none; border-radius: 8px; font-family: 'Jomhuria', sans-serif;       font-size: 20px; padding: 3px 6px; cursor: pointer;">Ask Gemini</button>%60;let r=n.querySelector("ul");t.forEach(e=>{let t=document.createElement("li"),n=document.createElement("a");n.href=%60#${e.id}%60,n.textContent=%60"${e.text}" â†’ ${e.time}s%60,n.style.color="#333",n.style.fontFamily="'Jomhuria', sans-serif",n.addEventListener("click",t=>{let n=document.getElementById(e.id);n&&(n.style.transition="background-color 0.5s",n.style.backgroundColor="#ffff99",n.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{n.style.backgroundColor=""},800))}),t.appendChild(n);let o=document.createElement("input");o.type="checkbox",o.style.marginRight="5px",o.addEventListener("change",t=>{t.target.checked?i.push(e.textFull):i=i.filter(t=>t!==e.text)}),t.prepend(o),r.appendChild(t)}),document.body.appendChild(n),document.getElementById("closePARH").addEventListener("click",()=>{n.remove()}),document.getElementById("openGemini").addEventListener("click",()=>{if(0==i.length){alert("Please select at least one paragraph!");return}let e=%60Tell me more about these paragraphs, in the language that they are written and in a easier way: ${i.join("\n\n")}%60;s(e)})}alert("Your reading is started! Press Shift+Enter to stop the timer and see the results."),window.stopReading=()=>{let t=((Date.now()-e)/1e3).toFixed(1),r=[];n.forEach((e,t)=>{e.time>1&&r.push({text:t.innerText.slice(0,40)+"...",textFull:t.innerText,time:e.time,id:t.id})}),d(t,r),n.clear(),l.disconnect()},document.addEventListener("keydown",function(e){"Enter"===e.key&&e.shiftKey&&t&&(stopReading(),t=!1)})})();
